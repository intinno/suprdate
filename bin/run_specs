#!/usr/bin/env bash
# runs run_specs.rb with warnings on and filters out the warnings I am not interested in
set -o nounset
if ! ls ../suprdate > /dev/null; then
  echo "You are in the wrong working directory" >&2
  exit 1
fi
stderr_dump_path='tmp/warnings'
ruby -w bin/run_specs.rb 2> "$stderr_dump_path"
# supresses warnings from rspec and from use of "should ==" in spec files
cat "$stderr_dump_path" | grep -v 'rspec-' | grep -v '.spec.rb.*== in void context'
